<mat-sidenav-container>
  <mat-sidenav
    [mode]="(matchesMedium | async) ? 'over' : 'side'"
    [fixedInViewport]="matchesMedium | async"
    [fixedTopGap]="(matchesSmall | async) ? 56 : 64"
    [opened]="(matchesMedium | async) === false"
  >
    <mat-nav-list>
      <a mat-list-item routerLink="/" [appAuthRole]="['admin', 'manager', 'sales']">
        <mat-icon mat-list-icon class="icon-space">home</mat-icon>
        Home
      </a>
      <mat-divider [appAuthRole]="['admin', 'manager']"></mat-divider>

      <!-- Orders Group -->
      <mat-list-item (click)="toggleGroup('sales')" style="cursor:pointer;" [appAuthRole]="['admin', 'manager']">
        <span class="main-item-content">
          <mat-icon mat-list-icon class="icon-space">receipt</mat-icon>
          <span>Orders</span>
          <mat-icon class="arrow-icon">{{ expanded.sales ? 'expand_less' : 'expand_more' }}</mat-icon>
        </span>
      </mat-list-item>
      <div *ngIf="expanded.sales" class="sidenav-subgroup">
        <a mat-list-item routerLink="/sales/sales" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">sell</mat-icon>
          Sales
        </a>
        <a mat-list-item routerLink="/sales/orders" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">receipt</mat-icon>
          Orders
        </a>
        <a mat-list-item routerLink="/sales/returns" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">cancel</mat-icon>
          Returns
        </a>
      </div>

      <!-- Products Group -->
      <mat-list-item (click)="toggleGroup('products')" style="cursor:pointer;" [appAuthRole]="['admin', 'manager', 'sales']">
        <span class="main-item-content">
          <mat-icon mat-list-icon class="icon-space">inventory_2</mat-icon>
          <span>Products</span>
          <mat-icon class="arrow-icon">{{ expanded.products ? 'expand_less' : 'expand_more' }}</mat-icon>
        </span>
      </mat-list-item>
      <div *ngIf="expanded.products" class="sidenav-subgroup">
        <a mat-list-item routerLink="/catalog/products" [appAuthRole]="['admin', 'manager', 'sales']">
          <mat-icon mat-list-icon class="icon-space">inventory_2</mat-icon>
          Product List
        </a>
        <a mat-list-item routerLink="/catalog/categories/2/trending" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">trending_up</mat-icon>
          Trending
        </a>
        <a mat-list-item routerLink="/catalog/promotions" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">local_offer</mat-icon>
          Promotions
        </a>
      </div>

      <!-- Reports -->
      <mat-list-item (click)="toggleGroup('reports')" style="cursor:pointer;" [appAuthRole]="['admin', 'sales']">
        <span class="main-item-content">
          <mat-icon mat-list-icon class="icon-space">bar_chart</mat-icon>
          <span>Reports</span>
          <mat-icon class="arrow-icon">{{ expanded.reports ? 'expand_less' : 'expand_more' }}</mat-icon>
        </span>
      </mat-list-item>
      <div *ngIf="expanded.reports" class="sidenav-subgroup">
        <a mat-list-item routerLink="/catalog/reports" [appAuthRole]="['admin']">
          <mat-icon mat-list-icon class="icon-space">description</mat-icon>
          Catalog Reports
        </a>
        <a mat-list-item routerLink="/sales/sales-report" [appAuthRole]="['sales']">
          <mat-icon mat-list-icon class="icon-space">assessment</mat-icon>
          Sales Report
        </a>
      </div>

      <!-- Complaints -->
      <mat-list-item (click)="toggleGroup('complaints')" style="cursor:pointer;" [appAuthRole]="['admin', 'manager']">
        <span class="main-item-content">
          <mat-icon mat-list-icon class="icon-space">personal_injury</mat-icon>
          <span>Complaints</span>
          <mat-icon class="arrow-icon">{{ expanded.complaints ? 'expand_less' : 'expand_more' }}</mat-icon>
        </span>
      </mat-list-item>
      <div *ngIf="expanded.complaints" class="sidenav-subgroup">
        <a mat-list-item routerLink="/sales/complaints" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">report_problem</mat-icon>
          Complaints
        </a>
      </div>

      <!-- FAQs -->
      <mat-list-item (click)="toggleGroup('faqs')" style="cursor:pointer;" [appAuthRole]="['admin', 'manager']">
        <span class="main-item-content">
          <mat-icon mat-list-icon class="icon-space">question_answer</mat-icon>
          <span>FAQs</span>
          <mat-icon class="arrow-icon">{{ expanded.faqs ? 'expand_less' : 'expand_more' }}</mat-icon>
        </span>
      </mat-list-item>
      <div *ngIf="expanded.faqs" class="sidenav-subgroup">
        <a mat-list-item routerLink="/catalog/faqs" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">help_outline</mat-icon>
          FAQs
        </a>
      </div>

      <!-- Configs Group -->
      <mat-list-item (click)="toggleGroup('configs')" style="cursor:pointer;" [appAuthRole]="['admin', 'manager']">
        <span class="main-item-content">
          <mat-icon mat-list-icon class="icon-space">settings</mat-icon>
          <span>Configs</span>
          <mat-icon class="arrow-icon">{{ expanded.configs ? 'expand_less' : 'expand_more' }}</mat-icon>
        </span>
      </mat-list-item>
      <div *ngIf="expanded.configs" class="sidenav-subgroup">
        <a mat-list-item routerLink="/catalog/addresses" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">location_on</mat-icon>
          Addresses
        </a>
        <a mat-list-item routerLink="/catalog/categories" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">category</mat-icon>
          Categories
        </a>
      </div>

      <!-- Users Group -->
      <mat-list-item (click)="toggleGroup('users')" style="cursor:pointer;" [appAuthRole]="['admin', 'manager']">
        <span class="main-item-content">
          <mat-icon mat-list-icon class="icon-space">people</mat-icon>
          <span>Users</span>
          <mat-icon class="arrow-icon">{{ expanded.users ? 'expand_less' : 'expand_more' }}</mat-icon>
        </span>
      </mat-list-item>
      <div *ngIf="expanded.users" class="sidenav-subgroup">
        <a mat-list-item routerLink="/users" [appAuthRole]="['admin']">
          <mat-icon mat-list-icon class="icon-space">people</mat-icon>
          Users List
        </a>
        <a mat-list-item routerLink="/customers" [appAuthRole]="['admin', 'manager']">
          <mat-icon mat-list-icon class="icon-space">person</mat-icon>
          Customers
        </a>
        <a mat-list-item routerLink="/operations" [appAuthRole]="['admin']" [ngClass]="{ active: router.url.startsWith('/operations') }">
          <mat-icon mat-list-icon class="icon-space">history</mat-icon>
          Operation Logs
        </a>
      </div>

      <!-- Settings -->
      <mat-list-item (click)="toggleGroup('settings')" style="cursor:pointer;" [appAuthRole]="['admin']">
        <span class="main-item-content">
          <mat-icon mat-list-icon class="icon-space">settings</mat-icon>
          <span>Settings</span>
          <mat-icon class="arrow-icon">{{ expanded.settings ? 'expand_less' : 'expand_more' }}</mat-icon>
        </span>
      </mat-list-item>
      <div *ngIf="expanded.settings" class="sidenav-subgroup">
        <a mat-list-item routerLink="/settings" [appAuthRole]="['admin']">
          <mat-icon mat-list-icon class="icon-space">settings</mat-icon>
          Settings
        </a>
      </div>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <ng-content></ng-content>
  </mat-sidenav-content>
</mat-sidenav-container>

<style>
.sidenav-subgroup {
  padding-left: 2em;
  background: rgba(0,0,0,0.02);
}
.main-item-content {
  display: flex;
  align-items: center;
  width: 100%;
}
.arrow-icon {
  font-size: 20px;
  margin-left: auto;
  vertical-align: middle;
}
.icon-space {
  margin-right: 0.5em;
}
</style>
